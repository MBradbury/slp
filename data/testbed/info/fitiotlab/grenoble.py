# Note this file was generated by ./scripts/fetch_fitiotlab_topologies.py.
# Please make changes to that script instead of editing this file.

from itertools import groupby, count

import numpy as np

from simulator.Topology import Topology

class Grenoble(Topology):
    """The layout of nodes on the Grenoble testbed, see: https://www.iot-lab.info/testbed/maps.php?site=grenoble"""

    platform = "wsn430v13"

    def __init__(self, subset=None):
        super(Grenoble, self).__init__()
        
        self.nodes[1] = np.array((4.25, 27.67, 1.98), dtype=np.float64)
        self.nodes[2] = np.array((4.57, 27.37, 2.7), dtype=np.float64)
        self.nodes[3] = np.array((5.67, 27.37, 2.22), dtype=np.float64)
        self.nodes[4] = np.array((6.36, 27.37, 2.8), dtype=np.float64)
        self.nodes[5] = np.array((7.4, 27.37, 2.42), dtype=np.float64)
        self.nodes[6] = np.array((8.15, 27.37, 2.85), dtype=np.float64)
        self.nodes[7] = np.array((9.13, 27.37, 2.28), dtype=np.float64)
        self.nodes[8] = np.array((10.4, 27.37, 2.37), dtype=np.float64)
        self.nodes[10] = np.array((12.53, 27.37, 2.3), dtype=np.float64)
        self.nodes[11] = np.array((13.75, 27.37, 2.65), dtype=np.float64)
        self.nodes[12] = np.array((3.03, 28.07, 2.54), dtype=np.float64)
        self.nodes[13] = np.array((3.83, 28.07, 2.54), dtype=np.float64)
        self.nodes[14] = np.array((4.8, 28.07, 2.54), dtype=np.float64)
        self.nodes[15] = np.array((5.74, 28.07, 2.54), dtype=np.float64)
        self.nodes[16] = np.array((6.76, 28.07, 2.54), dtype=np.float64)
        self.nodes[17] = np.array((7.86, 28.07, 2.54), dtype=np.float64)
        self.nodes[18] = np.array((8.93, 28.07, 2.54), dtype=np.float64)
        self.nodes[19] = np.array((10.13, 28.07, 2.54), dtype=np.float64)
        self.nodes[20] = np.array((11.28, 28.07, 2.54), dtype=np.float64)
        self.nodes[21] = np.array((12.18, 28.07, 2.54), dtype=np.float64)
        self.nodes[22] = np.array((13.18, 28.07, 2.54), dtype=np.float64)
        self.nodes[23] = np.array((14.18, 28.07, 2.54), dtype=np.float64)
        self.nodes[24] = np.array((14.93, 28.07, 2.54), dtype=np.float64)
        self.nodes[25] = np.array((15.73, 28.07, 2.54), dtype=np.float64)
        self.nodes[26] = np.array((1.98, 29.35, 3.6), dtype=np.float64)
        self.nodes[27] = np.array((3.13, 29.35, 3.6), dtype=np.float64)
        self.nodes[28] = np.array((4.08, 29.35, 3.6), dtype=np.float64)
        self.nodes[29] = np.array((5.18, 29.35, 3.6), dtype=np.float64)
        self.nodes[30] = np.array((6.38, 29.35, 3.6), dtype=np.float64)
        self.nodes[31] = np.array((7.45, 29.35, 3.6), dtype=np.float64)
        self.nodes[32] = np.array((8.3, 29.35, 3.6), dtype=np.float64)
        self.nodes[33] = np.array((8.8, 29.35, 3.6), dtype=np.float64)
        self.nodes[34] = np.array((10.17, 29.35, 3.6), dtype=np.float64)
        self.nodes[35] = np.array((11.08, 29.35, 3.6), dtype=np.float64)
        self.nodes[36] = np.array((12.12, 29.35, 3.6), dtype=np.float64)
        self.nodes[37] = np.array((12.89, 29.35, 3.6), dtype=np.float64)
        self.nodes[38] = np.array((14.11, 29.35, 3.6), dtype=np.float64)
        self.nodes[39] = np.array((15.13, 29.35, 3.6), dtype=np.float64)
        self.nodes[40] = np.array((3.95, 29.1, 2.53), dtype=np.float64)
        self.nodes[41] = np.array((5.51, 29.05, 2.53), dtype=np.float64)
        self.nodes[42] = np.array((7.53, 29.22, 2.53), dtype=np.float64)
        self.nodes[43] = np.array((9.53, 29.02, 2.53), dtype=np.float64)
        self.nodes[44] = np.array((11.73, 29.27, 2.53), dtype=np.float64)
        self.nodes[45] = np.array((13.78, 29.01, 2.53), dtype=np.float64)
        self.nodes[46] = np.array((15.58, 28.93, 2.53), dtype=np.float64)
        self.nodes[47] = np.array((2.98, 30.13, 2.52), dtype=np.float64)
        self.nodes[48] = np.array((4.33, 30.21, 2.52), dtype=np.float64)
        self.nodes[49] = np.array((5.3, 30.21, 2.52), dtype=np.float64)
        self.nodes[50] = np.array((6.28, 30.17, 2.52), dtype=np.float64)
        self.nodes[51] = np.array((7.51, 30.17, 2.52), dtype=np.float64)
        self.nodes[52] = np.array((8.58, 30.17, 2.52), dtype=np.float64)
        self.nodes[53] = np.array((9.58, 30.17, 2.52), dtype=np.float64)
        self.nodes[54] = np.array((10.45, 30.17, 2.52), dtype=np.float64)
        self.nodes[55] = np.array((11.32, 30.17, 2.52), dtype=np.float64)
        self.nodes[56] = np.array((12.26, 30.17, 2.52), dtype=np.float64)
        self.nodes[57] = np.array((13.28, 30.17, 2.52), dtype=np.float64)
        self.nodes[58] = np.array((14.28, 30.17, 2.52), dtype=np.float64)
        self.nodes[59] = np.array((15.53, 30.17, 2.52), dtype=np.float64)
        self.nodes[60] = np.array((16.53, 29.72, 2.5), dtype=np.float64)
        self.nodes[61] = np.array((3.98, 30.37, 3.6), dtype=np.float64)
        self.nodes[62] = np.array((5.08, 30.47, 3.6), dtype=np.float64)
        self.nodes[63] = np.array((6.18, 30.47, 3.6), dtype=np.float64)
        self.nodes[64] = np.array((7.2, 30.47, 3.6), dtype=np.float64)
        self.nodes[65] = np.array((8.68, 30.47, 3.6), dtype=np.float64)
        self.nodes[66] = np.array((9.58, 30.47, 3.6), dtype=np.float64)
        self.nodes[69] = np.array((12.35, 30.42, 3.6), dtype=np.float64)
        self.nodes[70] = np.array((13.28, 30.42, 3.6), dtype=np.float64)
        self.nodes[71] = np.array((14.31, 30.42, 3.6), dtype=np.float64)
        self.nodes[72] = np.array((15.21, 30.42, 3.6), dtype=np.float64)
        self.nodes[73] = np.array((7.83, 30.92, 3.53), dtype=np.float64)
        self.nodes[74] = np.array((4.0, 31.97, 3.66), dtype=np.float64)
        self.nodes[75] = np.array((4.97, 31.97, 3.66), dtype=np.float64)
        self.nodes[76] = np.array((6.0, 31.97, 3.66), dtype=np.float64)
        self.nodes[77] = np.array((7.01, 31.97, 3.66), dtype=np.float64)
        self.nodes[78] = np.array((8.16, 31.97, 3.66), dtype=np.float64)
        self.nodes[79] = np.array((9.08, 31.97, 3.66), dtype=np.float64)
        self.nodes[80] = np.array((10.1, 31.99, 3.66), dtype=np.float64)
        self.nodes[81] = np.array((11.05, 31.92, 3.66), dtype=np.float64)
        self.nodes[82] = np.array((12.07, 32.03, 3.66), dtype=np.float64)
        self.nodes[83] = np.array((13.07, 32.03, 3.66), dtype=np.float64)
        self.nodes[84] = np.array((14.26, 32.05, 3.66), dtype=np.float64)
        self.nodes[85] = np.array((15.41, 32.05, 3.66), dtype=np.float64)
        self.nodes[86] = np.array((3.17, 32.02, 2.58), dtype=np.float64)
        self.nodes[87] = np.array((4.27, 32.02, 2.58), dtype=np.float64)
        self.nodes[88] = np.array((5.44, 32.03, 2.58), dtype=np.float64)
        self.nodes[89] = np.array((6.4, 32.03, 2.58), dtype=np.float64)
        self.nodes[90] = np.array((7.45, 32.03, 2.58), dtype=np.float64)
        self.nodes[91] = np.array((8.42, 32.03, 2.58), dtype=np.float64)
        self.nodes[92] = np.array((9.37, 32.04, 2.58), dtype=np.float64)
        self.nodes[93] = np.array((10.3, 32.04, 2.58), dtype=np.float64)
        self.nodes[94] = np.array((11.3, 32.02, 2.58), dtype=np.float64)
        self.nodes[95] = np.array((12.4, 32.02, 2.58), dtype=np.float64)
        self.nodes[96] = np.array((13.36, 31.97, 2.58), dtype=np.float64)
        self.nodes[97] = np.array((14.43, 31.97, 2.58), dtype=np.float64)
        self.nodes[98] = np.array((15.41, 31.95, 2.58), dtype=np.float64)
        self.nodes[99] = np.array((2.3, 27.37, 2.65), dtype=np.float64)
        self.nodes[100] = np.array((17.06, 33.57, 2.62), dtype=np.float64)
        self.nodes[101] = np.array((3.8, 30.85, 2.6), dtype=np.float64)
        self.nodes[102] = np.array((15.58, 30.97, 2.6), dtype=np.float64)
        self.nodes[126] = np.array((2.34, 35.6, 2.63), dtype=np.float64)
        self.nodes[127] = np.array((8.81, 27.77, 3.0), dtype=np.float64)
        self.nodes[128] = np.array((10.91, 27.72, 3.02), dtype=np.float64)
        self.nodes[129] = np.array((1.98, 33.64, 2.6), dtype=np.float64)
        self.nodes[130] = np.array((2.71, 33.57, 2.57), dtype=np.float64)
        self.nodes[131] = np.array((3.73, 33.57, 2.57), dtype=np.float64)
        self.nodes[132] = np.array((4.81, 33.57, 2.57), dtype=np.float64)
        self.nodes[133] = np.array((5.72, 33.57, 2.58), dtype=np.float64)
        self.nodes[134] = np.array((6.7, 33.57, 2.59), dtype=np.float64)
        self.nodes[135] = np.array((7.68, 33.57, 2.59), dtype=np.float64)
        self.nodes[136] = np.array((8.7, 33.57, 2.6), dtype=np.float64)
        self.nodes[137] = np.array((9.7, 33.57, 2.6), dtype=np.float64)
        self.nodes[138] = np.array((10.69, 33.57, 2.61), dtype=np.float64)
        self.nodes[139] = np.array((11.71, 33.57, 2.61), dtype=np.float64)
        self.nodes[140] = np.array((12.71, 33.57, 2.62), dtype=np.float64)
        self.nodes[141] = np.array((13.74, 33.57, 2.62), dtype=np.float64)
        self.nodes[142] = np.array((14.75, 33.57, 2.62), dtype=np.float64)
        self.nodes[143] = np.array((15.73, 33.57, 2.62), dtype=np.float64)
        self.nodes[144] = np.array((7.95, 34.01, 3.6), dtype=np.float64)
        self.nodes[145] = np.array((11.23, 33.99, 3.58), dtype=np.float64)
        self.nodes[146] = np.array((2.56, 35.07, 3.67), dtype=np.float64)
        self.nodes[147] = np.array((3.36, 35.07, 3.67), dtype=np.float64)
        self.nodes[148] = np.array((4.4, 35.07, 3.67), dtype=np.float64)
        self.nodes[149] = np.array((5.35, 35.07, 3.67), dtype=np.float64)
        self.nodes[150] = np.array((6.4, 35.07, 3.67), dtype=np.float64)
        self.nodes[151] = np.array((7.45, 35.07, 3.67), dtype=np.float64)
        self.nodes[152] = np.array((8.43, 35.07, 3.67), dtype=np.float64)
        self.nodes[153] = np.array((9.75, 35.07, 3.67), dtype=np.float64)
        self.nodes[154] = np.array((10.76, 35.07, 3.67), dtype=np.float64)
        self.nodes[155] = np.array((11.66, 35.07, 3.67), dtype=np.float64)
        self.nodes[156] = np.array((12.66, 35.07, 3.67), dtype=np.float64)
        self.nodes[157] = np.array((13.76, 35.07, 3.67), dtype=np.float64)
        self.nodes[158] = np.array((14.76, 35.07, 3.67), dtype=np.float64)
        self.nodes[159] = np.array((15.78, 35.07, 3.67), dtype=np.float64)
        self.nodes[160] = np.array((1.91, 35.09, 2.6), dtype=np.float64)
        self.nodes[161] = np.array((2.75, 35.07, 2.58), dtype=np.float64)
        self.nodes[162] = np.array((3.65, 35.07, 2.58), dtype=np.float64)
        self.nodes[163] = np.array((4.57, 35.07, 2.58), dtype=np.float64)
        self.nodes[164] = np.array((5.54, 35.07, 2.58), dtype=np.float64)
        self.nodes[165] = np.array((6.55, 35.07, 2.58), dtype=np.float64)
        self.nodes[166] = np.array((7.53, 35.07, 2.58), dtype=np.float64)
        self.nodes[167] = np.array((8.54, 35.07, 2.58), dtype=np.float64)
        self.nodes[168] = np.array((9.56, 35.07, 2.58), dtype=np.float64)
        self.nodes[169] = np.array((10.66, 35.07, 2.58), dtype=np.float64)
        self.nodes[170] = np.array((11.76, 35.07, 2.58), dtype=np.float64)
        self.nodes[171] = np.array((12.8, 35.07, 2.58), dtype=np.float64)
        self.nodes[172] = np.array((2.52, 36.37, 3.67), dtype=np.float64)
        self.nodes[173] = np.array((3.37, 36.37, 3.67), dtype=np.float64)
        self.nodes[174] = np.array((4.44, 36.37, 3.67), dtype=np.float64)
        self.nodes[175] = np.array((5.39, 36.37, 3.67), dtype=np.float64)
        self.nodes[176] = np.array((6.55, 36.37, 3.67), dtype=np.float64)
        self.nodes[177] = np.array((7.46, 36.37, 3.67), dtype=np.float64)
        self.nodes[178] = np.array((8.53, 36.37, 3.67), dtype=np.float64)
        self.nodes[179] = np.array((9.56, 36.37, 3.67), dtype=np.float64)
        self.nodes[180] = np.array((10.51, 36.37, 3.67), dtype=np.float64)
        self.nodes[181] = np.array((11.66, 36.37, 3.67), dtype=np.float64)
        self.nodes[182] = np.array((12.55, 36.37, 3.67), dtype=np.float64)
        self.nodes[183] = np.array((13.55, 36.37, 3.67), dtype=np.float64)
        self.nodes[184] = np.array((14.61, 36.37, 3.67), dtype=np.float64)
        self.nodes[185] = np.array((15.65, 36.37, 3.67), dtype=np.float64)
        self.nodes[186] = np.array((1.93, 36.37, 2.56), dtype=np.float64)
        self.nodes[187] = np.array((2.91, 36.37, 2.55), dtype=np.float64)
        self.nodes[188] = np.array((3.91, 36.37, 2.55), dtype=np.float64)
        self.nodes[189] = np.array((4.91, 36.37, 2.55), dtype=np.float64)
        self.nodes[190] = np.array((5.91, 36.37, 2.55), dtype=np.float64)
        self.nodes[191] = np.array((6.91, 36.37, 2.55), dtype=np.float64)
        self.nodes[192] = np.array((7.92, 36.34, 2.55), dtype=np.float64)
        self.nodes[193] = np.array((8.92, 36.37, 2.55), dtype=np.float64)
        self.nodes[194] = np.array((10.02, 36.34, 2.55), dtype=np.float64)
        self.nodes[195] = np.array((11.07, 36.37, 2.55), dtype=np.float64)
        self.nodes[196] = np.array((12.06, 36.37, 2.55), dtype=np.float64)
        self.nodes[197] = np.array((13.18, 36.37, 2.55), dtype=np.float64)
        self.nodes[198] = np.array((7.16, 37.6, 3.37), dtype=np.float64)
        self.nodes[199] = np.array((12.23, 37.55, 3.37), dtype=np.float64)
        self.nodes[200] = np.array((13.25, 37.55, 3.37), dtype=np.float64)
        self.nodes[201] = np.array((14.26, 37.55, 3.37), dtype=np.float64)
        self.nodes[202] = np.array((15.26, 37.55, 3.37), dtype=np.float64)
        self.nodes[203] = np.array((16.26, 37.55, 3.37), dtype=np.float64)
        self.nodes[204] = np.array((3.23, 37.82, 2.8), dtype=np.float64)
        self.nodes[205] = np.array((4.23, 37.82, 2.95), dtype=np.float64)
        self.nodes[206] = np.array((5.03, 37.82, 3.1), dtype=np.float64)
        self.nodes[207] = np.array((4.78, 37.82, 2.3), dtype=np.float64)
        self.nodes[208] = np.array((6.13, 37.82, 2.55), dtype=np.float64)
        self.nodes[209] = np.array((6.91, 38.07, 3.2), dtype=np.float64)
        self.nodes[210] = np.array((6.91, 38.07, 2.18), dtype=np.float64)
        self.nodes[211] = np.array((6.91, 38.87, 2.13), dtype=np.float64)
        self.nodes[212] = np.array((12.23, 37.77, 2.43), dtype=np.float64)
        self.nodes[213] = np.array((12.98, 37.77, 2.37), dtype=np.float64)
        self.nodes[214] = np.array((13.93, 37.77, 2.48), dtype=np.float64)
        self.nodes[215] = np.array((14.96, 37.77, 2.6), dtype=np.float64)
        self.nodes[216] = np.array((16.06, 37.77, 2.7), dtype=np.float64)
        self.nodes[217] = np.array((17.08, 37.77, 2.2), dtype=np.float64)
        self.nodes[218] = np.array((7.84, 38.59, 3.35), dtype=np.float64)
        self.nodes[219] = np.array((7.84, 39.55, 3.35), dtype=np.float64)
        self.nodes[220] = np.array((7.86, 40.55, 3.35), dtype=np.float64)
        self.nodes[221] = np.array((7.86, 41.45, 3.35), dtype=np.float64)
        self.nodes[222] = np.array((9.96, 38.54, 3.6), dtype=np.float64)
        self.nodes[223] = np.array((9.98, 39.49, 3.6), dtype=np.float64)
        self.nodes[224] = np.array((9.98, 40.51, 3.6), dtype=np.float64)
        self.nodes[225] = np.array((9.98, 41.41, 3.6), dtype=np.float64)
        self.nodes[226] = np.array((9.96, 42.41, 3.6), dtype=np.float64)
        self.nodes[227] = np.array((11.34, 38.57, 3.35), dtype=np.float64)
        self.nodes[228] = np.array((11.36, 39.57, 3.35), dtype=np.float64)
        self.nodes[229] = np.array((11.36, 40.57, 3.35), dtype=np.float64)
        self.nodes[230] = np.array((11.36, 41.47, 3.35), dtype=np.float64)
        self.nodes[231] = np.array((8.53, 37.32, 2.57), dtype=np.float64)
        self.nodes[232] = np.array((8.53, 38.43, 2.57), dtype=np.float64)
        self.nodes[233] = np.array((8.53, 39.45, 2.57), dtype=np.float64)
        self.nodes[234] = np.array((10.24, 37.34, 2.57), dtype=np.float64)
        self.nodes[235] = np.array((10.24, 38.24, 2.57), dtype=np.float64)
        self.nodes[236] = np.array((10.24, 39.47, 2.57), dtype=np.float64)
        self.nodes[237] = np.array((6.91, 39.77, 3.5), dtype=np.float64)
        self.nodes[238] = np.array((8.83, 40.28, 2.66), dtype=np.float64)
        self.nodes[239] = np.array((6.91, 41.77, 3.25), dtype=np.float64)
        self.nodes[241] = np.array((8.56, 40.05, 3.7), dtype=np.float64)
        self.nodes[242] = np.array((6.91, 40.87, 3.53), dtype=np.float64)
        self.nodes[243] = np.array((9.51, 41.87, 3.34), dtype=np.float64)
        self.nodes[244] = np.array((10.36, 40.09, 3.7), dtype=np.float64)
        self.nodes[245] = np.array((10.51, 38.42, 3.37), dtype=np.float64)
        self.nodes[246] = np.array((11.41, 42.95, 3.63), dtype=np.float64)
        self.nodes[247] = np.array((12.23, 41.31, 3.65), dtype=np.float64)
        self.nodes[248] = np.array((10.24, 40.28, 2.6), dtype=np.float64)
        self.nodes[249] = np.array((12.23, 41.91, 3.27), dtype=np.float64)
        self.nodes[250] = np.array((12.23, 40.57, 3.53), dtype=np.float64)
        self.nodes[251] = np.array((7.31, 42.95, 3.62), dtype=np.float64)
        self.nodes[252] = np.array((8.12, 42.95, 3.63), dtype=np.float64)
        self.nodes[253] = np.array((8.88, 42.95, 3.63), dtype=np.float64)
        self.nodes[254] = np.array((7.69, 41.9, 3.35), dtype=np.float64)
        self.nodes[255] = np.array((10.13, 42.95, 3.66), dtype=np.float64)
        
        if subset is not None:
            to_keep = {x for l in (range(start, end+1) for (start, end) in subset) for x in l}
            for key in set(self.nodes) - to_keep:
                del self.nodes[key]
        
        self._process_node_id_order("topology")

    def node_ids(self):
        """Get the node id string that identifies which nodes are being used to the testbed."""
        # From: https://stackoverflow.com/questions/17415086/combine-consecutive-numbers-into-range-tuples
        groups = groupby(self.nodes.keys(), key=lambda item, c=count():item-next(c))
        temp = [list(g) for k, g in groups]
        return "+".join("{}-{}".format(x[0], x[-1]) for x in temp)

    def __str__(self):
        return "Grenoble<>"

