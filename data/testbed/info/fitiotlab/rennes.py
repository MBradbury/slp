# Note this file was generated by ./scripts/fetch_fitiotlab_topologies.py.
# Please make changes to that script instead of editing this file.

from itertools import groupby, count

import numpy as np

from simulator.Topology import Topology

class Rennes(Topology):
    """The layout of nodes on the Rennes testbed, see: https://www.iot-lab.info/testbed/maps.php?site=rennes"""

    platform = "wsn430v14"

    def __init__(self, subset=None):
        super(Rennes, self).__init__()
        
        self.nodes[2] = np.array((-4.62, 0.744, 2.912), dtype=np.float64)
        self.nodes[3] = np.array((-4.62, 1.348, 2.911), dtype=np.float64)
        self.nodes[5] = np.array((-4.62, 2.556, 2.911), dtype=np.float64)
        self.nodes[6] = np.array((-4.62, 3.161, 2.91), dtype=np.float64)
        self.nodes[7] = np.array((-4.62, 3.765, 2.91), dtype=np.float64)
        self.nodes[8] = np.array((-4.62, 4.369, 2.91), dtype=np.float64)
        self.nodes[9] = np.array((-4.62, 4.973, 2.91), dtype=np.float64)
        self.nodes[10] = np.array((-4.62, 5.577, 2.909), dtype=np.float64)
        self.nodes[11] = np.array((-4.62, 6.181, 2.909), dtype=np.float64)
        self.nodes[12] = np.array((-4.62, 6.785, 2.909), dtype=np.float64)
        self.nodes[13] = np.array((-4.62, 7.389, 2.908), dtype=np.float64)
        self.nodes[14] = np.array((-4.62, 7.994, 2.908), dtype=np.float64)
        self.nodes[15] = np.array((-4.62, 8.598, 2.908), dtype=np.float64)
        self.nodes[16] = np.array((-4.62, 9.202, 2.907), dtype=np.float64)
        self.nodes[17] = np.array((-4.62, 9.806, 2.907), dtype=np.float64)
        self.nodes[18] = np.array((-4.62, 10.41, 2.907), dtype=np.float64)
        self.nodes[19] = np.array((-4.62, 11.014, 2.907), dtype=np.float64)
        self.nodes[20] = np.array((-4.62, 11.618, 2.906), dtype=np.float64)
        self.nodes[21] = np.array((-4.62, 12.222, 2.906), dtype=np.float64)
        self.nodes[22] = np.array((-4.62, 12.826, 2.906), dtype=np.float64)
        self.nodes[23] = np.array((-4.62, 13.431, 2.905), dtype=np.float64)
        self.nodes[24] = np.array((-4.62, 14.035, 2.905), dtype=np.float64)
        self.nodes[25] = np.array((-3.796, 0.14, 2.912), dtype=np.float64)
        self.nodes[26] = np.array((-3.796, 0.744, 2.912), dtype=np.float64)
        self.nodes[27] = np.array((-3.796, 1.348, 2.911), dtype=np.float64)
        self.nodes[28] = np.array((-3.796, 1.952, 2.911), dtype=np.float64)
        self.nodes[29] = np.array((-3.796, 2.556, 2.911), dtype=np.float64)
        self.nodes[30] = np.array((-3.796, 3.161, 2.91), dtype=np.float64)
        self.nodes[31] = np.array((-3.796, 3.765, 2.91), dtype=np.float64)
        self.nodes[32] = np.array((-3.796, 4.369, 2.91), dtype=np.float64)
        self.nodes[34] = np.array((-3.796, 5.577, 2.909), dtype=np.float64)
        self.nodes[35] = np.array((-3.796, 6.181, 2.909), dtype=np.float64)
        self.nodes[36] = np.array((-3.796, 6.785, 2.909), dtype=np.float64)
        self.nodes[37] = np.array((-3.796, 7.389, 2.908), dtype=np.float64)
        self.nodes[38] = np.array((-3.796, 7.994, 2.908), dtype=np.float64)
        self.nodes[39] = np.array((-3.796, 8.598, 2.908), dtype=np.float64)
        self.nodes[40] = np.array((-3.796, 9.202, 2.907), dtype=np.float64)
        self.nodes[41] = np.array((-3.796, 9.806, 2.907), dtype=np.float64)
        self.nodes[42] = np.array((-3.796, 10.41, 2.907), dtype=np.float64)
        self.nodes[43] = np.array((-3.796, 11.014, 2.907), dtype=np.float64)
        self.nodes[44] = np.array((-3.796, 11.618, 2.906), dtype=np.float64)
        self.nodes[45] = np.array((-3.796, 12.222, 2.906), dtype=np.float64)
        self.nodes[46] = np.array((-3.796, 12.826, 2.906), dtype=np.float64)
        self.nodes[49] = np.array((-2.972, 0.14, 2.912), dtype=np.float64)
        self.nodes[50] = np.array((-2.972, 0.744, 2.912), dtype=np.float64)
        self.nodes[51] = np.array((-2.972, 1.348, 2.911), dtype=np.float64)
        self.nodes[52] = np.array((-2.972, 1.952, 2.911), dtype=np.float64)
        self.nodes[53] = np.array((-2.972, 2.556, 2.911), dtype=np.float64)
        self.nodes[54] = np.array((-2.972, 3.161, 2.91), dtype=np.float64)
        self.nodes[55] = np.array((-2.972, 3.765, 2.91), dtype=np.float64)
        self.nodes[56] = np.array((-2.972, 4.369, 2.91), dtype=np.float64)
        self.nodes[57] = np.array((-2.972, 4.973, 2.91), dtype=np.float64)
        self.nodes[58] = np.array((-2.972, 5.577, 2.909), dtype=np.float64)
        self.nodes[59] = np.array((-2.972, 6.181, 2.909), dtype=np.float64)
        self.nodes[60] = np.array((-2.972, 6.785, 2.909), dtype=np.float64)
        self.nodes[61] = np.array((-2.972, 7.389, 2.908), dtype=np.float64)
        self.nodes[62] = np.array((-2.972, 7.994, 2.908), dtype=np.float64)
        self.nodes[63] = np.array((-2.972, 8.598, 2.908), dtype=np.float64)
        self.nodes[64] = np.array((-2.972, 9.202, 2.907), dtype=np.float64)
        self.nodes[65] = np.array((-2.972, 9.806, 2.907), dtype=np.float64)
        self.nodes[66] = np.array((-2.972, 10.41, 2.907), dtype=np.float64)
        self.nodes[67] = np.array((-2.972, 11.014, 2.907), dtype=np.float64)
        self.nodes[68] = np.array((-2.972, 11.618, 2.906), dtype=np.float64)
        self.nodes[69] = np.array((-2.972, 12.222, 2.906), dtype=np.float64)
        self.nodes[70] = np.array((-2.972, 12.826, 2.906), dtype=np.float64)
        self.nodes[71] = np.array((-2.972, 13.431, 2.905), dtype=np.float64)
        self.nodes[73] = np.array((-2.148, 0.14, 2.912), dtype=np.float64)
        self.nodes[74] = np.array((-2.148, 0.744, 2.912), dtype=np.float64)
        self.nodes[75] = np.array((-2.148, 1.348, 2.911), dtype=np.float64)
        self.nodes[76] = np.array((-2.148, 1.952, 2.911), dtype=np.float64)
        self.nodes[77] = np.array((-2.148, 2.556, 2.911), dtype=np.float64)
        self.nodes[78] = np.array((-2.148, 3.161, 2.91), dtype=np.float64)
        self.nodes[80] = np.array((-2.148, 4.369, 2.91), dtype=np.float64)
        self.nodes[81] = np.array((-2.148, 4.973, 2.91), dtype=np.float64)
        self.nodes[82] = np.array((-2.148, 5.577, 2.909), dtype=np.float64)
        self.nodes[83] = np.array((-2.148, 6.181, 2.909), dtype=np.float64)
        self.nodes[84] = np.array((-2.148, 6.785, 2.909), dtype=np.float64)
        self.nodes[85] = np.array((-2.148, 7.389, 2.908), dtype=np.float64)
        self.nodes[86] = np.array((-2.148, 7.994, 2.908), dtype=np.float64)
        self.nodes[87] = np.array((-2.148, 8.598, 2.908), dtype=np.float64)
        self.nodes[88] = np.array((-2.148, 9.202, 2.907), dtype=np.float64)
        self.nodes[89] = np.array((-2.148, 9.806, 2.907), dtype=np.float64)
        self.nodes[90] = np.array((-2.148, 10.41, 2.907), dtype=np.float64)
        self.nodes[91] = np.array((-2.148, 11.014, 2.907), dtype=np.float64)
        self.nodes[92] = np.array((-2.148, 11.618, 2.906), dtype=np.float64)
        self.nodes[93] = np.array((-2.148, 12.222, 2.906), dtype=np.float64)
        self.nodes[94] = np.array((-2.148, 12.826, 2.906), dtype=np.float64)
        self.nodes[95] = np.array((-2.148, 13.431, 2.905), dtype=np.float64)
        self.nodes[96] = np.array((-2.148, 14.035, 2.905), dtype=np.float64)
        self.nodes[97] = np.array((-1.324, 0.14, 2.912), dtype=np.float64)
        self.nodes[101] = np.array((-1.324, 2.556, 2.911), dtype=np.float64)
        self.nodes[102] = np.array((-1.324, 3.161, 2.91), dtype=np.float64)
        self.nodes[104] = np.array((-1.324, 4.369, 2.91), dtype=np.float64)
        self.nodes[106] = np.array((-1.324, 5.577, 2.909), dtype=np.float64)
        self.nodes[109] = np.array((-1.324, 7.389, 2.908), dtype=np.float64)
        self.nodes[110] = np.array((-1.324, 7.994, 2.908), dtype=np.float64)
        self.nodes[111] = np.array((-1.324, 8.598, 2.908), dtype=np.float64)
        self.nodes[112] = np.array((-1.324, 9.202, 2.907), dtype=np.float64)
        self.nodes[113] = np.array((-1.324, 9.806, 2.907), dtype=np.float64)
        self.nodes[114] = np.array((-1.324, 10.41, 2.907), dtype=np.float64)
        self.nodes[116] = np.array((-1.324, 11.618, 2.906), dtype=np.float64)
        self.nodes[118] = np.array((-1.324, 12.826, 2.906), dtype=np.float64)
        self.nodes[119] = np.array((-1.324, 13.431, 2.905), dtype=np.float64)
        self.nodes[120] = np.array((-1.324, 14.035, 2.905), dtype=np.float64)
        self.nodes[121] = np.array((-0.5, 0.14, 2.912), dtype=np.float64)
        self.nodes[122] = np.array((-0.5, 0.744, 2.912), dtype=np.float64)
        self.nodes[123] = np.array((-0.5, 1.348, 2.911), dtype=np.float64)
        self.nodes[125] = np.array((-0.5, 2.556, 2.911), dtype=np.float64)
        self.nodes[126] = np.array((-0.5, 3.161, 2.91), dtype=np.float64)
        self.nodes[127] = np.array((-0.5, 3.765, 2.91), dtype=np.float64)
        self.nodes[128] = np.array((-0.5, 4.369, 2.91), dtype=np.float64)
        self.nodes[129] = np.array((-0.5, 4.973, 2.91), dtype=np.float64)
        self.nodes[133] = np.array((-0.5, 7.389, 2.908), dtype=np.float64)
        self.nodes[134] = np.array((-0.5, 7.994, 2.908), dtype=np.float64)
        self.nodes[135] = np.array((-0.5, 8.598, 2.908), dtype=np.float64)
        self.nodes[136] = np.array((-0.5, 9.202, 2.907), dtype=np.float64)
        self.nodes[138] = np.array((-0.5, 10.41, 2.907), dtype=np.float64)
        self.nodes[139] = np.array((-0.5, 11.014, 2.907), dtype=np.float64)
        self.nodes[140] = np.array((-0.5, 11.618, 2.906), dtype=np.float64)
        self.nodes[141] = np.array((-0.5, 12.222, 2.906), dtype=np.float64)
        self.nodes[142] = np.array((-0.5, 12.826, 2.906), dtype=np.float64)
        self.nodes[143] = np.array((-0.5, 13.431, 2.905), dtype=np.float64)
        self.nodes[144] = np.array((-0.5, 14.035, 2.905), dtype=np.float64)
        self.nodes[145] = np.array((0.66, 0.51, 2.66), dtype=np.float64)
        self.nodes[146] = np.array((0.66, 1.46, 2.8), dtype=np.float64)
        self.nodes[147] = np.array((0.66, 2.51, 2.69), dtype=np.float64)
        self.nodes[148] = np.array((0.66, 3.11, 2.7), dtype=np.float64)
        self.nodes[150] = np.array((2.26, 0.744, 2.912), dtype=np.float64)
        self.nodes[152] = np.array((2.26, 1.952, 2.911), dtype=np.float64)
        self.nodes[153] = np.array((2.26, 2.556, 2.91), dtype=np.float64)
        self.nodes[154] = np.array((2.26, 3.161, 2.91), dtype=np.float64)
        self.nodes[155] = np.array((2.26, 3.765, 2.91), dtype=np.float64)
        self.nodes[156] = np.array((2.26, 4.369, 2.909), dtype=np.float64)
        self.nodes[157] = np.array((2.26, 4.973, 2.909), dtype=np.float64)
        self.nodes[158] = np.array((2.26, 5.577, 2.908), dtype=np.float64)
        self.nodes[159] = np.array((2.26, 6.181, 2.908), dtype=np.float64)
        self.nodes[160] = np.array((2.26, 6.785, 2.907), dtype=np.float64)
        self.nodes[161] = np.array((2.26, 7.389, 2.907), dtype=np.float64)
        self.nodes[162] = np.array((2.26, 7.994, 2.907), dtype=np.float64)
        self.nodes[163] = np.array((2.26, 8.598, 2.906), dtype=np.float64)
        self.nodes[164] = np.array((2.26, 9.202, 2.906), dtype=np.float64)
        self.nodes[165] = np.array((2.26, 9.806, 2.905), dtype=np.float64)
        self.nodes[166] = np.array((2.26, 10.41, 2.905), dtype=np.float64)
        self.nodes[167] = np.array((3.084, 0.14, 2.912), dtype=np.float64)
        self.nodes[168] = np.array((3.084, 0.744, 2.912), dtype=np.float64)
        self.nodes[169] = np.array((3.084, 1.348, 2.911), dtype=np.float64)
        self.nodes[170] = np.array((3.084, 1.952, 2.911), dtype=np.float64)
        self.nodes[172] = np.array((3.084, 3.161, 2.91), dtype=np.float64)
        self.nodes[173] = np.array((3.084, 3.765, 2.91), dtype=np.float64)
        self.nodes[174] = np.array((3.084, 4.369, 2.909), dtype=np.float64)
        self.nodes[175] = np.array((3.084, 4.973, 2.909), dtype=np.float64)
        self.nodes[176] = np.array((3.084, 5.577, 2.908), dtype=np.float64)
        self.nodes[177] = np.array((3.084, 6.181, 2.908), dtype=np.float64)
        self.nodes[178] = np.array((3.084, 6.785, 2.907), dtype=np.float64)
        self.nodes[179] = np.array((3.084, 7.389, 2.907), dtype=np.float64)
        self.nodes[180] = np.array((3.084, 7.994, 2.907), dtype=np.float64)
        self.nodes[181] = np.array((3.084, 8.598, 2.906), dtype=np.float64)
        self.nodes[182] = np.array((3.084, 9.202, 2.906), dtype=np.float64)
        self.nodes[183] = np.array((3.084, 9.806, 2.905), dtype=np.float64)
        self.nodes[184] = np.array((3.084, 10.41, 2.905), dtype=np.float64)
        self.nodes[185] = np.array((3.908, 0.14, 2.912), dtype=np.float64)
        self.nodes[186] = np.array((3.908, 0.744, 2.912), dtype=np.float64)
        self.nodes[187] = np.array((3.908, 1.348, 2.911), dtype=np.float64)
        self.nodes[188] = np.array((3.908, 1.952, 2.911), dtype=np.float64)
        self.nodes[190] = np.array((3.908, 3.161, 2.91), dtype=np.float64)
        self.nodes[191] = np.array((3.908, 3.765, 2.91), dtype=np.float64)
        self.nodes[193] = np.array((3.908, 4.973, 2.909), dtype=np.float64)
        self.nodes[194] = np.array((3.908, 5.577, 2.908), dtype=np.float64)
        self.nodes[195] = np.array((3.908, 6.181, 2.908), dtype=np.float64)
        self.nodes[196] = np.array((3.908, 6.785, 2.907), dtype=np.float64)
        self.nodes[197] = np.array((3.908, 7.389, 2.907), dtype=np.float64)
        self.nodes[198] = np.array((3.908, 7.994, 2.907), dtype=np.float64)
        self.nodes[199] = np.array((3.908, 8.598, 2.906), dtype=np.float64)
        self.nodes[200] = np.array((3.908, 9.202, 2.906), dtype=np.float64)
        self.nodes[201] = np.array((3.908, 9.806, 2.905), dtype=np.float64)
        self.nodes[202] = np.array((3.908, 10.41, 2.905), dtype=np.float64)
        self.nodes[203] = np.array((4.732, 0.14, 2.912), dtype=np.float64)
        self.nodes[206] = np.array((4.732, 1.952, 2.911), dtype=np.float64)
        self.nodes[207] = np.array((4.732, 2.556, 2.91), dtype=np.float64)
        self.nodes[208] = np.array((4.732, 3.161, 2.91), dtype=np.float64)
        self.nodes[209] = np.array((4.732, 3.765, 2.91), dtype=np.float64)
        self.nodes[210] = np.array((4.732, 4.369, 2.909), dtype=np.float64)
        self.nodes[211] = np.array((4.732, 4.973, 2.909), dtype=np.float64)
        self.nodes[212] = np.array((4.732, 5.577, 2.908), dtype=np.float64)
        self.nodes[213] = np.array((4.732, 6.181, 2.908), dtype=np.float64)
        self.nodes[214] = np.array((4.732, 6.785, 2.907), dtype=np.float64)
        self.nodes[215] = np.array((4.732, 7.389, 2.907), dtype=np.float64)
        self.nodes[216] = np.array((4.732, 7.994, 2.907), dtype=np.float64)
        self.nodes[217] = np.array((4.732, 8.598, 2.906), dtype=np.float64)
        self.nodes[218] = np.array((4.732, 9.202, 2.906), dtype=np.float64)
        self.nodes[219] = np.array((4.732, 9.806, 2.905), dtype=np.float64)
        self.nodes[220] = np.array((4.732, 10.41, 2.905), dtype=np.float64)
        self.nodes[221] = np.array((5.556, 0.14, 2.912), dtype=np.float64)
        self.nodes[222] = np.array((5.556, 0.744, 2.912), dtype=np.float64)
        self.nodes[223] = np.array((5.556, 1.348, 2.911), dtype=np.float64)
        self.nodes[225] = np.array((5.556, 2.556, 2.91), dtype=np.float64)
        self.nodes[226] = np.array((5.556, 3.161, 2.91), dtype=np.float64)
        self.nodes[227] = np.array((5.556, 3.765, 2.91), dtype=np.float64)
        self.nodes[228] = np.array((5.556, 4.369, 2.909), dtype=np.float64)
        self.nodes[229] = np.array((5.556, 4.973, 2.909), dtype=np.float64)
        self.nodes[230] = np.array((5.556, 5.577, 2.908), dtype=np.float64)
        self.nodes[231] = np.array((5.556, 6.181, 2.908), dtype=np.float64)
        self.nodes[232] = np.array((5.556, 6.785, 2.907), dtype=np.float64)
        self.nodes[233] = np.array((5.556, 7.389, 2.907), dtype=np.float64)
        self.nodes[234] = np.array((5.556, 7.994, 2.907), dtype=np.float64)
        self.nodes[235] = np.array((5.556, 8.598, 2.906), dtype=np.float64)
        self.nodes[236] = np.array((5.556, 9.202, 2.906), dtype=np.float64)
        self.nodes[237] = np.array((5.556, 9.806, 2.905), dtype=np.float64)
        self.nodes[238] = np.array((5.556, 10.41, 2.905), dtype=np.float64)
        self.nodes[240] = np.array((6.38, 0.744, 2.912), dtype=np.float64)
        self.nodes[241] = np.array((6.38, 1.348, 2.911), dtype=np.float64)
        self.nodes[242] = np.array((6.38, 1.952, 2.911), dtype=np.float64)
        self.nodes[243] = np.array((6.38, 2.556, 2.91), dtype=np.float64)
        self.nodes[244] = np.array((6.38, 3.161, 2.91), dtype=np.float64)
        self.nodes[245] = np.array((6.38, 3.765, 2.91), dtype=np.float64)
        self.nodes[247] = np.array((6.38, 4.973, 2.909), dtype=np.float64)
        self.nodes[248] = np.array((6.38, 5.577, 2.908), dtype=np.float64)
        self.nodes[249] = np.array((6.38, 6.181, 2.908), dtype=np.float64)
        self.nodes[250] = np.array((6.38, 6.785, 2.907), dtype=np.float64)
        self.nodes[251] = np.array((6.38, 7.389, 2.907), dtype=np.float64)
        self.nodes[252] = np.array((6.38, 7.994, 2.907), dtype=np.float64)
        self.nodes[253] = np.array((6.38, 8.598, 2.906), dtype=np.float64)
        self.nodes[254] = np.array((6.38, 9.202, 2.906), dtype=np.float64)
        self.nodes[255] = np.array((6.38, 9.806, 2.905), dtype=np.float64)
        self.nodes[256] = np.array((6.38, 10.41, 2.905), dtype=np.float64)
        
        if subset is not None:
            to_keep = {x for l in (range(start, end+1) for (start, end) in subset) for x in l}
            for key in set(self.nodes) - to_keep:
                del self.nodes[key]
        
        self._process_node_id_order("topology")

    def node_ids(self):
        """Get the node id string that identifies which nodes are being used to the testbed."""
        # From: https://stackoverflow.com/questions/17415086/combine-consecutive-numbers-into-range-tuples
        groups = groupby(self.nodes.keys(), key=lambda item, c=count():item-next(c))
        temp = [list(g) for k, g in groups]
        return "+".join("{}-{}".format(x[0], x[-1]) for x in temp)

    def __str__(self):
        return "Rennes<>"

